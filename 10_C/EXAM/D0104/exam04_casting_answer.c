/* **************************************************************************
 *			            C EXAM - TYPE CASTING
 * **************************************************************************/
#include <stdio.h>

 // =========================================================================
 // 단답형
 // =========================================================================
 // -------------------------------------------------------------------------
 // 1. 자동 형변환을 무엇이라고 하나요?
 // ------------------------------------------------------------------------- 
 // 정답 : 암시적/묵시적 형변환(implicit conversion)
 //        코드에 캐스팅을 쓰지 않아도 컴파일러가 타입을 맞추려고 자동으로 
 //        바꾸는 것.
 //        예) int + double에서 int가 double로 자동 변환됨.
 

 // -------------------------------------------------------------------------  
 // 2. 강제 형변환을 무엇이라고 하나요?
 // ------------------------------------------------------------------------- 
 // 정답 : 캐스팅(casting), 명시적 형변환(explicit conversion)
 //        개발자가 (int), (double)처럼 직접 타입을 지정해서 바꾸는 것.


 // -------------------------------------------------------------------------  
 // 3. (int)3.14의 결과는 얼마인가요?
 // ------------------------------------------------------------------------- 
 // 정답 : 3  (소수점 이하 버림)
 //        실수→정수 변환은 소수점 이하를 버림(truncation).


 // -------------------------------------------------------------------------  
 // 4. int와 double을 더하면 결과 타입은 무엇인가요?
 // ------------------------------------------------------------------------- 
 // 정답 : double  (정확히는 double로 승격 후 연산)
 //        서로 다른 타입이면 더 “큰/정밀한” 쪽으로 맞추기 위해 int가 
 //        double로 변환된 뒤 계산


 // -------------------------------------------------------------------------  
 // 5. char가 연산에 참여하면 내부적으로 어떤 정수형으로 승격되나요?
 // ------------------------------------------------------------------------- 
 // 정답 : int (integer promotion)
 //        char/short 같은 작은 정수형은 연산 전에 보통 int로 승격(integer promotion) 
 //        되어 계산


 // -------------------------------------------------------------------------  
 // 6. int / int 연산 결과 타입은 무엇인가요?
 // ------------------------------------------------------------------------- 
 // 정답 : int (정수 나눗셈)
 //        피연산자의 타입과 결과 타입 동일 
 //        둘 다 정수면 정수 나눗셈이라 결과도 정수이고, 소수점 이하 버림. 


 // -------------------------------------------------------------------------  
 // 7. int / double 연산 결과 타입은 무엇인가요?
 // ------------------------------------------------------------------------- 
 // 정답 : double
 //        작은 타입 , 큰 타입 연산시 컴파일러에 의해서 큰 타입으로 자동형변환
 //        한쪽이 double이면 다른 쪽(int)도 double로 변환되어 실수 나눗셈


 // -------------------------------------------------------------------------  
 // 8. 데이터 손실(loss of data)이 발생하기 쉬운 형변환 방향은? 
 // ------------------------------------------------------------------------- 
 // 정답 : 큰 범위/정밀 → 작은 범위/정밀
 //        정밀도나 표현 범위가 줄어들면 잘림/오버플로우로 값이 달라질 수 있음


 // -------------------------------------------------------------------------  
 // 9. signed를 unsigned로 캐스팅하면 어떤 문제가 생길 수 있나요? 
 // ------------------------------------------------------------------------- 
 // 정답 : 음수가 매우 큰 양수로 바뀌는 등 값 해석이 달라질 수 있음
 //        비트 패턴은 같은데 해석 방식이 바뀌어서 값이 달라짐

 // -------------------------------------------------------------------------  
 // 10. 실수를 정수형으로 형변환할 때 소수점 이하 값은 어떻게 처리되나요?
 // ------------------------------------------------------------------------- 
 // 정답 : 실수->정수 시 소수부 처리: 버림(truncation, 0 쪽으로 잘림)
 //        3.9 → 3, -3.9 → -3 처럼 소수부를 제거


 // =========================================================================
 // 코드형
 // =========================================================================
int main(void)
{
    // -------------------------------------------------------------------------
    // 1. 정수 2개를 입력받아 실수 나눗셈 결과가 나오도록 출력하세요.
    // -------------------------------------------------------------------------
    printf("\n[1] 정수 2개 -> 실수 나눗셈 결과\n");
    {
        int a, b;
        printf("정수 2개 입력(a b): ");
        if (scanf("%d %d", &a, &b) != 2) return 0;

        if (b == 0)
        {
            printf("0으로 나눌 수 없습니다.\n");
        }
        else
        {
            double result = (double)a / (double)b;
            printf("(double)a / (double)b = %.6f\n", result);
        }
    }

    // -------------------------------------------------------------------------
    // 2. double을 입력받아 int로 캐스팅한 값과 원래 값을 함께 출력하세요.
    // -------------------------------------------------------------------------
    printf("\n[2] double -> int 캐스팅(버림 확인)\n");
    {
        double x;
        printf("double 입력: ");
        if (scanf("%lf", &x) != 1) return 0;

        int ix = (int)x;
        printf("원래 값(double) = %.6f\n", x);
        printf("캐스팅 값(int)  = %d\n", ix);
    }

    // -------------------------------------------------------------------------
    // 3. char 1개를 입력받아 ASCII 값을 int로 변환해 출력하세요.
    // -------------------------------------------------------------------------
    printf("\n[3] char -> ASCII(int) 출력\n");
    {
        char ch;
        printf("문자 1개 입력: ");
        if (scanf(" %c", &ch) != 1) return 0;

        printf("입력 문자 = %c\n", ch);
        printf("ASCII 값  = %d\n", (int)ch);
    }

    // -------------------------------------------------------------------------
    // 4. int를 입력받아 unsigned int로 캐스팅한 결과를 출력해 비교하세요.
    // -------------------------------------------------------------------------
    printf("\n[4] int -> unsigned int 캐스팅 비교\n");
    {
        int n;
        printf("int 입력(음수도 입력해 보세요): ");
        if (scanf("%d", &n) != 1) return 0;

        unsigned int un = (unsigned int)n;
        printf("int 값          = %d\n", n);
        printf("unsigned int 값 = %u\n", un);
    }

    // -------------------------------------------------------------------------
    // 5. int 1개를 입력받아 float로 변환 후 소수점 2자리로 출력하세요.
    // -------------------------------------------------------------------------
    printf("\n[5] int -> float 변환 후 소수점 2자리 출력\n");
    {
        int n;
        printf("int 입력: ");
        if (scanf("%d", &n) != 1) return 0;

        float f = (float)n;
        printf("float 값 = %.2f\n", f);
    }

    // -------------------------------------------------------------------------
    // 6. double 1개를 입력받아 소수점 셋째 자리에서 반올림한 값을 출력하세요.
    //    (예: 3.14 -> 3.1, 3.15 -> 3.2)  ※ round() 금지
    // -------------------------------------------------------------------------
    printf("\n[6] 소수점 2자리 반올림(셋째 자리에서 반올림)\n");
    {
        double x, origin;
        printf("double 입력: ");
        if (scanf("%lf", &x) != 1) return 0;

        // 원래 값 보관
        origin = x;  

        // 소수점 셋째 자리에서 반올림 → 소수점 둘째 자리까지 유지
        x = x * 100.0;
        x = (int)(x + (x >= 0 ? 0.5 : -0.5));

        double y = x / 100.0;

        printf("원래 값 = %.6f\n", origin);
        printf("반올림(소수2자리) = %.2f\n", y);
    }

    // -------------------------------------------------------------------------
    // 7. int a = 300; char c = (char)a; 실행하고 c를 정수로 출력해 확인하세요.
    // -------------------------------------------------------------------------
    printf("\n[7] int 300 -> char 캐스팅 후 정수 출력\n");
    {
        int a = 300;
        char c = (char)a;

        printf("a(int) = %d\n", a);
        printf("c(char) as int = %d\n", (int)c);
    }

    // -------------------------------------------------------------------------
    // 8. double 2개 입력받아 평균을 구하고, int(버림)과 double(정밀)로 각각 출력
    // -------------------------------------------------------------------------
    printf("\n[8] 평균 계산 후 int(버림) / double(정밀) 출력\n");
    {
        double x, y;
        printf("double 2개 입력(x y): ");
        if (scanf("%lf %lf", &x, &y) != 2) return 0;

        double avg = (x + y) / 2.0;
        int avg_int = (int)avg;

        printf("평균(double) = %.6f\n", avg);
        printf("평균(int, 버림) = %d\n", avg_int);
    }

    // -------------------------------------------------------------------------
    // 9. 정수 1개를 입력받아 (double)로 캐스팅한 뒤, 0.5를 더한 값을 출력하세요.
    // -------------------------------------------------------------------------
    printf("\n[9] int -> double 캐스팅 후 0.5 더하기\n");
    {
        int n;
        printf("int 입력: ");
        if(scanf("%d", &n) != 1) return 0;

        double d = (double)n;
        printf("(double)n      = %.6f\n", d);
        printf("(double)n+0.5  = %.6f\n", d + 0.5);
    }

    // -------------------------------------------------------------------------
    // 10. 실수 입력 받아 정수부와 소수부를 분리해 출력하세요. ((int)x, x-(int)x)
    // -------------------------------------------------------------------------
    printf("\n[10] 실수 정수부/소수부 분리\n");
    {
        double x;
        printf("double 입력: ");
        if(scanf("%lf", &x) != 1) return 0;

        int int_part = (int)x;
        double frac_part = x - (double)int_part;

        printf("원래 값 = %.6f\n", x);
        printf("정수부  = %d\n", int_part);
        printf("소수부  = %.6f\n", frac_part);
    }

    return 0;
}